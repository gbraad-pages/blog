<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Deployment of Ceph using custom Atomic images - Gerard Braad's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://gbraad.nl/blog/deployment-of-ceph-using-custom-atomic-images.html">

        <meta name="author" content="Gerard Braad <me@gbraad.nl>" />
        <meta name="keywords" content="centos,ceph,atomic,ansible,ostree,storage" />
        <meta name="description" content="As part of providing a scalable infrastructure, many components in the datacenter are now moving towards software-based solutions, such as SDN (for networking) and SDS (for storage). Ceph one of these projects to provide a scalable, software-based software solution. It is often used in conjuction with OpenStack for storing disk ..." />

        <meta property="og:site_name" content="Gerard Braad's blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Deployment of Ceph using custom Atomic images"/>
        <meta property="og:url" content="http://gbraad.nl/blog/deployment-of-ceph-using-custom-atomic-images.html"/>
        <meta property="og:description" content="As part of providing a scalable infrastructure, many components in the datacenter are now moving towards software-based solutions, such as SDN (for networking) and SDS (for storage). Ceph one of these projects to provide a scalable, software-based software solution. It is often used in conjuction with OpenStack for storing disk ..."/>
        <meta property="article:published_time" content="2016-09-07" />
            <meta property="article:section" content="Containers" />
            <meta property="article:tag" content="centos" />
            <meta property="article:tag" content="ceph" />
            <meta property="article:tag" content="atomic" />
            <meta property="article:tag" content="ansible" />
            <meta property="article:tag" content="ostree" />
            <meta property="article:tag" content="storage" />
            <meta property="article:author" content="Gerard Braad <me@gbraad.nl>" />


    <!-- Bootstrap -->
	<link href="//cdn.gbraad.nl/css/bootstrap.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/font-awesome.css" rel="stylesheet">
    <link href="//cdn.gbraad.nl/css/pygments-tomorrownightbright.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/animations.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/style.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/custom.css" rel="stylesheet">

        <link href="http://gbraad.nl/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Gerard Braad's blog ATOM Feed"/>



        <link href="http://gbraad.nl/blog/feeds/containers.atom.xml" type="application/atom+xml" rel="alternate"
              title="Gerard Braad's blog Containers ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://gbraad.nl/blog/" class="navbar-brand">
Gerard Braad's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="http://gbraad.nl/blog/category/about-me.html">About me</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/books.html">Books</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/ci-cd.html">CI / CD</a>
                        </li>
                        <li class="active">
                            <a href="http://gbraad.nl/blog/category/containers.html">Containers</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/devops.html">DevOps</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/high-availability.html">High Availability</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/javascript.html">JavaScript</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/misc.html">Misc</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/openstack.html">OpenStack</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://gbraad.nl/blog/deployment-of-ceph-using-custom-atomic-images.html"
                       rel="bookmark"
                       title="Permalink to Deployment of Ceph using custom Atomic images">
                        Deployment of Ceph using custom Atomic images
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-09-07T00:00:00+08:00"> Wed 07 September 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="http://gbraad.nl/blog/tag/centos.html">centos</a>
        /
	<a href="http://gbraad.nl/blog/tag/ceph.html">ceph</a>
        /
	<a href="http://gbraad.nl/blog/tag/atomic.html">atomic</a>
        /
	<a href="http://gbraad.nl/blog/tag/ansible.html">ansible</a>
        /
	<a href="http://gbraad.nl/blog/tag/ostree.html">ostree</a>
        /
	<a href="http://gbraad.nl/blog/tag/storage.html">storage</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>As part of providing a scalable infrastructure, many components in the datacenter are now moving towards software-based solutions, such as SDN (for networking) and SDS (for storage). Ceph one of these projects to provide a scalable, software-based software solution. It is often used in conjuction with OpenStack for storing disk images and block access for volumes. Setting up an environment usually involves installing a base operating system and configuring the machine to join a storage cluster. In this article I will setup a Atomic based image that allows for fast deployment of Ceph cluster. This is not a recommended solution, but an exercise that shows how to cutomize Atomic Host and using Ansible to standup a Ceph cluster.</p>
<h2>Components</h2>
<p><a href="http://www.projectatomic.io/">Atomic</a><a href="https://gitlab.com/gbraad/knowledge-base/blob/master/technology/atomic.md">*</a> Host is a new generation of Operating Systems that used to create an immutable infrastructure to deploy and scale containerized applications. For this, it uses a technology called <a href="https://ostree.readthedocs.io/en/latest/">OSTree</a><a href="https://gitlab.com/gbraad/knowledge-base/blob/master/technology/ostree.md">*</a> which is a git-like model for dealing with filesystem trees. It allows different filesystems to exist alongside of each other. If a filesystem is not booting properly, it is possible to move back to the previous state.</p>
<p><a href="http://ceph.com/">Ceph</a><a href="https://gitlab.com/gbraad/knowledge-base/blob/master/technology/ceph.md">*</a> is a distributed storage solution which provides Object Storage, Block Storage and FIlesystem access. Ceph comes with several software components which provides a role in the cluster, such as a monitor or storage daemon.</p>
<p><a href="https://www.ansible.com/">Ansible</a><a href="https://gitlab.com/gbraad/knowledge-base/blob/master/technology/ansible.md">*</a> is a configuration and system management tool which for example can do multi-node deployment of software or execution of commands</p>
<p>Although Atomic Hosts are primarily used to deploy Docker and Kubernetes environments, or even containerized versions of the Ceph daemons, I will show how it is possible to use ostree to deploy the Ceph software on nodes, with minimal effort. Ansible is used to send commands to these nodes and finalize the configuration.</p>
<h2>Preparation</h2>
<p>For this setup we will use about 7 machines. To simplify testing, I have performed these actions on an OpenStack environment, such as <a href="https://www.dreamhost.com/cloud/computing/">DreamCompute</a>.</p>
<ul>
<li>1 controller and compose node, running Fedora 24 with IP address 10.3.0.2</li>
<li>3 Ceph monitors, running CentOS Atomic with IP addresses 10.3.0.3-5</li>
<li>3 Ceph storage nodes, running CentOS Atomic with IP addresses 10.3.0.6-8 and attached storage volume at <code>/dev/vdb</code>.</li>
</ul>
<p>To deploy you can start with setting up the Fedora node.</p>
<h3>Install controller</h3>
<p>To deploy our environment we setup a controller node which can access the other nodes in the network using SSH. In our case we will use Fedora 24.  After installing the operating system, perform the following commands:</p>
<div class="highlight"><pre><span></span>$ dnf update -y
$ dnf install -y  ansible rpm-ostree git python
$ ssh-keygen
$ cat ~/.ssh/id_rsa.pub
</pre></div>


<p>The last two commands generate an SSH authentication key and will show the result on the command line.</p>
<h3>Atomic nodes</h3>
<p>The installation media for Atomic can be found at the main project page. It comes in two different distribution types, CentOS or Fedora. For this article I used CentOS, and downloaded it from the following location:</p>
<div class="highlight"><pre><span></span>$ wget http://http://cloud.centos.org/centos/7/atomic/images/CentOS-Atomic-Host-7-GenericCloud.qcow2
</pre></div>


<p>and uploaded it to my OpenStack environment with:</p>
<div class="highlight"><pre><span></span>$ openstack image create <span class="s2">&quot;CentOS7 Atomic&quot;</span> --progress --file CentOS-Atomic-Host-7-GenericCloud.qcow2 --disk-format qcow2 --container-format bare --property <span class="nv">os_distro</span><span class="o">=</span>centos
</pre></div>


<p>After this, I created six identical machines, with provisioning a predefined SSH key with cloud-init which we made on the controller node. If you are not using OpenStack, you have to use a cloud-init configdrive to configure the node with the SSH key. This process is described <a href="http://www.projectatomic.io/docs/quickstart/">here</a>.</p>
<p>The storage nodes need to have to configured with a dedicated volume for use with the <code>osd</code> storage daemon of Ceph. By creating a volume and attaching them to the node, these will be identified as <code>/dev/vdb</code>. There is no need to prepapre a filesystem on them. This will be handles by the deployment scripts.</p>
<p>Note: if you want to upload disk images to DreamCompute or other Ceph-backed OpenStack image services, you have to convert the disk image to raw format first. An example of this can be found in <a href="https://gitlab.com/gbraad/knowledge-base/blob/master/technology/openstack/client.md#examples">an example</a> for use of the OpenStack client.</p>
<h2>Compose tree</h2>
<p>On the controller node we will create an ostree that will be used to setup the Ceph software on the Atomic host nodes. This process involves creating a definition for a filesystem tree that uses the base defintion of CentOS Atomic with the additional packages from the CentOS-specific Ceph packages.</p>
<h3>Atomic definition</h3>
<p>We will clone the git repositiory containing the base definition:</p>
<div class="highlight"><pre><span></span>$ mkdir -p /workspace
$ <span class="nb">cd</span> /workspace
$ git clone https://github.com/CentOS/sig-atomic-buildscripts.git <span class="se">\</span>
    -b downstream <span class="se">\</span>
    --depth <span class="m">1</span> <span class="se">\</span>
    ceph-atomic
</pre></div>


<p>Inside this folder you can add a RPM repository file where the Ceph packages are located:</p>
<p><code>ceph-atomic/centos-ceph-jewel.repo</code></p>
<div class="highlight"><pre><span></span><span class="k">[centos-ceph-jewel]</span>
<span class="na">name</span><span class="o">=</span><span class="s">CentOS-7 - Ceph Jewel</span>
<span class="na">baseurl</span><span class="o">=</span><span class="s">http://buildlogs.centos.org/centos/7/storage/x86_64/ceph-jewel/</span>
<span class="na">gpgcheck</span><span class="o">=</span><span class="s">0</span>
</pre></div>


<p>And then we will define an Atomic host for Ceph-Jewel and specify which additional repositories and packages are used:</p>
<p><code>ceph-atomic/ceph-atomic-host.json</code></p>
<div class="highlight"><pre><span></span>{
    &quot;include&quot;: &quot;centos-atomic-host.json&quot;,
    &quot;ref&quot;: &quot;centos-atomic-host/7/x86_64/ceph-jewel&quot;,
    &quot;automatic_version_prefix&quot;: &quot;2016.0&quot;,
    &quot;repos&quot;: [&quot;centos-ceph-jewel&quot;, &quot;epel&quot;],
    &quot;packages&quot;: [
        &quot;ceph&quot;,
        &quot;ntp&quot;,
        &quot;ntpdate&quot;,
        &quot;hdparm&quot;,
        &quot;autogen-libopts&quot;
    ]
}
</pre></div>


<p>Note: with <code>include</code> we base our image off an existing definition. In our case this will simplify the process, but it also means we will end up with an image with unneeded components. For our test this is not an issue.</p>
<p>After this, the defintion for the Ceph-specific Atomic host is finished. Before we can compose the ostree, we have to create and initialize the repository directory:</p>
<div class="highlight"><pre><span></span>$ mkdir -p /srv/repo
$ ostree --repo<span class="o">=</span>/srv/repo init --mode<span class="o">=</span>archive-z2
</pre></div>


<p>When you perform the following command:</p>
<div class="highlight"><pre><span></span>$ rpm-ostree compose tree <span class="se">\</span>
    --repo<span class="o">=</span>/srv/repo <span class="se">\</span>
    ./ceph-atomic/ceph-atomic-host.json
</pre></div>


<p>packages will be fetched and committed to an ostree in <code>/srv/repo</code>. After this, you will have a filesystem tree which can be served from a webserver, to be used by Atomic hosts.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /srv/repo
$ python -m SimpleHTTPServer
</pre></div>


<p>This will serve the content from <code>/srv/repo</code> on the endpoint <code>http://10.3.0.2:8000/</code>.</p>
<h2>Deployment</h2>
<p>To get the Atomic hosts to use the tree, the following commands will have to be used to provision the Ceph-based filesystem tree:</p>
<div class="highlight"><pre><span></span>$ sudo su -
$ setenforce 0
$ ostree remote add --set<span class="o">=</span>gpg-verify<span class="o">=</span><span class="nb">false</span> atomic-ceph http://10.3.0.2:8000/
$ rpm-ostree rebase atomic-ceph:centos-atomic-host/7/x86_64/ceph-jewel
$ systemctl reboot
</pre></div>


<p>This is however very cumbersome as we have to do this on six nodes. To optimize this process, we will use Ansible.</p>
<p>Note: <code>setenforce 0</code> is used to prevent issue with SELinux label during the rebase action.</p>
<h3>OSTree provisioning using Ansible</h3>
<p>Create a file called <code>hosts</code> in your home directory with the following content:</p>
<p><code>~/hosts</code></p>
<div class="highlight"><pre><span></span><span class="k">[mons]</span>
<span class="na">atomic-01 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.3</span>
<span class="na">atomic-02 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.4</span>
<span class="na">atomic-03 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.5</span>

<span class="k">[osds]</span>
<span class="na">atomic-04 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.6</span>
<span class="na">atomic-05 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.7</span>
<span class="na">atomic-06 ansible_ssh_host</span><span class="o">=</span><span class="s">10.3.0.8</span>
</pre></div>


<p>To test if the nodes are reachable, use the following command:</p>
<div class="highlight"><pre><span></span>$ ansible -i hosts all -u centos -s -m ping
</pre></div>


<p>If no error occurs, you are all set.</p>
<p>Using Ansible and the hosts file we can perform these commands on all the nodes.</p>
<div class="highlight"><pre><span></span>$ ansible -i hosts all -u centos -s -m shell -a <span class="s2">&quot;setenforce 0&quot;</span>
$ ansible -i hosts all -u centos -s -m shell -a <span class="s2">&quot;ostree remote add --set=gpg-verify=false atomic-ceph http://10.3.0.2:8000/&quot;</span>
$ ansible -i hosts all -u centos -s -m shell -a <span class="s2">&quot;rpm-ostree rebase atomic-ceph:centos-atomic-host/7/x86_64/ceph-jewel&quot;</span>
$ ansible -i hosts all -u centos -s -m shell -a <span class="s2">&quot;systemctl disable docker&quot;</span>
$ ansible -i hosts all -u centos -s -m shell -a <span class="s2">&quot;systemctl reboot&quot;</span>
</pre></div>


<p>The last command will throw errors, but this is expected as the connection to the node is dropped. To check if the nodes are up again, you can perform the previous ping test again.</p>
<p>Note: since we based on the original CentOS Atomic host image, it will have Docker installed. For this article we do not use it, so it is best to disable it.</p>
<h2>Deployment using <code>ceph-ansible</code></h2>
<p>If the previous step succeeded you would have six atomic hosts that are ready to be configured to form a small Ceph cluster; 3 nodes will serve the role of monitor, while the other nodes will be storage nodes with an attached volume at <code>/dev/vdb</code>. For the deployment we will use <code>ceph-ansible</code>. This is a collection of playbooks to help with common scenarios for a Ceph storage cluster.</p>
<p>From your home folder perform the following command:</p>
<div class="highlight"><pre><span></span>$ git clone https://github.com/ceph/ceph-ansible.git --depth 1
</pre></div>


<p>This will clone the latest version of the playbooks. But before we can use them, we will need to configure it for our setup. But before we do, we initialize it with the base configuration. Take note that we will re-use our previosuly used <code>~/hosts</code> file for Ansible.</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ceph-ansible
$ cp site.yml.sample site.yml
$ cp group_vars/all.sample group_vars/all
$ cp group_vars/mons.sample group_vars/mons
$ cp group_vars/osds.sample group_vars/osds
$ ln -s ~/hosts hosts
</pre></div>


<p>We will now customize the configuration by changing the following files and add the shows content to the top of the file:</p>
<p><code>group_vars/all</code></p>
<div class="highlight"><pre><span></span><span class="n">cluster_network</span><span class="o">:</span> <span class="mf">10.3</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>
<span class="n">generate_fsid</span><span class="o">:</span> <span class="s1">&#39;true&#39;</span>
<span class="n">ceph_origin</span><span class="o">:</span> <span class="n">distro</span>
<span class="n">monitor_interface</span><span class="o">:</span> <span class="n">eth0</span>
<span class="n">public_network</span><span class="o">:</span> <span class="mf">10.3</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>
<span class="n">journal_size</span><span class="o">:</span> <span class="mi">5120</span>
<span class="n">group_vars</span><span class="o">/</span><span class="n">mons</span>
<span class="n">cephx</span><span class="o">:</span> <span class="kc">false</span>
</pre></div>


<p><code>group_vars/mons</code></p>
<div class="highlight"><pre><span></span><span class="n">cephx</span><span class="o">:</span> <span class="kc">false</span>
</pre></div>


<p><code>group_vars/osds</code></p>
<div class="highlight"><pre><span></span><span class="n">journal_collocation</span><span class="o">:</span> <span class="kc">true</span>
<span class="n">cephx</span><span class="o">:</span> <span class="kc">false</span>
<span class="n">devices</span><span class="o">:</span>
   <span class="o">-</span> <span class="sr">/dev/</span><span class="n">vdb</span>
</pre></div>


<p>After these changes are made, you have setup to use Ceph packages as provided by the distribution, and to deploy as a storage cluster on 10.3.0.0/24.</p>
<p>To deploy the storage cluster, all we need to do now is to run the playbook named <code>site.yml</code> and skipping the tags named <code>with_pkg</code> and <code>package-install</code>.</p>
<div class="highlight"><pre><span></span>$ ansible-playbook -i hosts site.yml --skip-tags with_pkg,package-install
</pre></div>


<p>After this finishes a storage cluster should be available.</p>
<h2>Conclusion</h2>
<p>This article showed how it is possible to customize an Atomic host image for a specific use-case and use this for deployment of a simple Ceph cluster. Using ostree it is possible to move between different trees, allowing a collection of packages to be upgraded in an atomic fashion. And when there is a failure for some reason, it is possible to rollback to the previous tree and allow the node to function in the former state.</p>
<p>This is part of the setup I usefor automated builds of Ceph packages and deployment tests. If you have questions about specific parts, please let me know on Twitter at <a href="https://twitter.com/gbraad">@gbraad</a> or by email. Input is appreciated as this can help with writing of future articles.</p>
<h2>Links</h2>
<p>Some information that can help with customizing your own images:</p>
<ul>
<li><a href="https://github.com/jasonbrooks/byo-atomic">Build your own Atomic</a>, and my <a href="http://gitlab.com/gbraad/byo-atomic">automated build</a></li>
<li><a href="https://gitlab.com/gbraad/ceph-atomic/">Tree definition</a></li>
<li><a href="https://gbraad.gitlab.io/byo-atomic-ceph/">Remote location</a></li>
<li><a href="https://gitlab.com/gbraad/byo-atomic-ceph/builds">Automated build</a></li>
</ul>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'gbraad-blog'; // required: replace example with your forum shortname

                    var disqus_identifier = 'deployment-of-ceph-using-custom-atomic-images';
                var disqus_url = 'http://gbraad.nl/blog/deployment-of-ceph-using-custom-atomic-images.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">





    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Gerard Braad <me@gbraad.nl>
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://gbraad.nl/blog/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://gbraad.nl/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://gbraad.nl/blog/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'gbraad-blog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34531495-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>