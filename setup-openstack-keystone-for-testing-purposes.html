<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Setup OpenStack Keystone for testing purposes - Gerard Braad's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://gbraad.nl/blog/setup-openstack-keystone-for-testing-purposes.html">

        <meta name="author" content="Gerard Braad <me@gbraad.nl>" />
        <meta name="keywords" content="openstack,keystone,docker,containers,authentication" />
        <meta name="description" content="OpenStack can be seen as a set of projects which combined into a configuration can deliver a management solution for different use-cases. However, several of these projects can also exist on their own to provide a certain functionality, such as Keystone, Ironic, etc. Some of these I will describe in ..." />

        <meta property="og:site_name" content="Gerard Braad's blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Setup OpenStack Keystone for testing purposes"/>
        <meta property="og:url" content="http://gbraad.nl/blog/setup-openstack-keystone-for-testing-purposes.html"/>
        <meta property="og:description" content="OpenStack can be seen as a set of projects which combined into a configuration can deliver a management solution for different use-cases. However, several of these projects can also exist on their own to provide a certain functionality, such as Keystone, Ironic, etc. Some of these I will describe in ..."/>
        <meta property="article:published_time" content="2016-10-27" />
            <meta property="article:section" content="OpenStack" />
            <meta property="article:tag" content="openstack" />
            <meta property="article:tag" content="keystone" />
            <meta property="article:tag" content="docker" />
            <meta property="article:tag" content="containers" />
            <meta property="article:tag" content="authentication" />
            <meta property="article:author" content="Gerard Braad <me@gbraad.nl>" />


    <!-- Bootstrap -->
	<link href="//cdn.gbraad.nl/css/bootstrap.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/font-awesome.css" rel="stylesheet">
    <link href="//cdn.gbraad.nl/css/pygments-tomorrownightbright.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/animations.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/style.css" rel="stylesheet">
	<link href="//cdn.gbraad.nl/css/custom.css" rel="stylesheet">

        <link href="http://gbraad.nl/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Gerard Braad's blog ATOM Feed"/>



        <link href="http://gbraad.nl/blog/feeds/openstack.atom.xml" type="application/atom+xml" rel="alternate"
              title="Gerard Braad's blog OpenStack ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://gbraad.nl/blog/" class="navbar-brand">
Gerard Braad's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="http://gbraad.nl/blog/category/about-me.html">About me</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/books.html">Books</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/ci-cd.html">CI / CD</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/containers.html">Containers</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/devops.html">DevOps</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/high-availability.html">High Availability</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/javascript.html">JavaScript</a>
                        </li>
                        <li >
                            <a href="http://gbraad.nl/blog/category/misc.html">Misc</a>
                        </li>
                        <li class="active">
                            <a href="http://gbraad.nl/blog/category/openstack.html">OpenStack</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://gbraad.nl/blog/setup-openstack-keystone-for-testing-purposes.html"
                       rel="bookmark"
                       title="Permalink to Setup OpenStack Keystone for testing purposes">
                        Setup OpenStack Keystone for testing purposes
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-10-27T00:00:00+08:00"> Thu 27 October 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="http://gbraad.nl/blog/tag/openstack.html">openstack</a>
        /
	<a href="http://gbraad.nl/blog/tag/keystone.html">keystone</a>
        /
	<a href="http://gbraad.nl/blog/tag/docker.html">docker</a>
        /
	<a href="http://gbraad.nl/blog/tag/containers.html">containers</a>
        /
	<a href="http://gbraad.nl/blog/tag/authentication.html">authentication</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>OpenStack can be seen as a set of projects which combined into a configuration
can deliver a management solution for different use-cases. However, several of
these projects can also exist on their own to provide a certain functionality,
such as Keystone, Ironic, etc. Some of these I will describe in articles on this
blog, but let's start with one of the most important one's that deal with
Authenticatioin, namely Keystone.</p>
<h2>Keystone</h2>
<p>Keystone is one of the core projects of OpenStack and is responsible for
providing Identity. It offersauthentication, authorization and service
discovery mechanisms via HTTP. Especially this last property, offering the API
to be accessed by HTTP as a ReSTful interface offers a lot of opportunities for
re-use. More about the Keystone project can be found on the
<a href="http://docs.openstack.org/developer/keystone/">project homepage</a>.</p>
<h2>Containerized</h2>
<p>To simplify the deployment process, I have containerized Keystone. The image can
be found at <a href="https://gitlab.com/gbraad/openstack-keystone">GitLab</a> and the
<a href="https://hub.docker.com/r/gbraad/openstack-keystone/">Docker Registry</a>.</p>
<h3><code>Dockerfile</code></h3>
<p>The image is based on a standard CentOS 7 cloud image. To install Keystone, I
used the packaged version from the <a href="//www.rdoproject.org">RDO project</a>. After
an update, it install the repository information pointing to mitaka, and then
it install the Keystone service, some useful utils to use with OpenStack and
the SELinux configuration files.</p>
<div class="highlight"><pre><span></span>RUN yum update -y &amp;&amp; \
    yum install -y centos-release-openstack-mitaka &amp;&amp; \
    yum install -y openstack-keystone openstack-utils openstack-selinux &amp;&amp; \
    yum clean all
</pre></div>


<p>After this we expose the ports that Keystone uses for interaction.</p>
<div class="highlight"><pre><span></span>EXPOSE 5000
EXPOSE 35357
</pre></div>


<p>As the <code>CMD</code> it will run a simple initialization script. It takes care to setup
an admin token and use a MySQL connection. It then starts <code>keystone-manage</code> to
provision the database with the schemas. And finally, it will use <code>keystone-all</code>
to run the services on the exposed ports.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nv">ADMIN_TOKEN</span><span class="o">=</span><span class="si">${</span><span class="nv">ADMIN_TOKEN</span><span class="p">-</span><span class="sb">`</span>openssl rand -hex 10<span class="sb">`</span><span class="si">}</span>
openstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token <span class="nv">$ADMIN_TOKEN</span>
openstack-config --set /etc/keystone/keystone.conf DEFAULT use_stderr True
openstack-config --set /etc/keystone/keystone.conf database connection <span class="si">${</span><span class="nv">CONNECTION</span><span class="p">-mysql://keystone:</span><span class="nv">password</span><span class="p">@dbhost/keystone</span><span class="si">}</span>
su keystone -s /bin/sh -c <span class="s2">&quot;keystone-manage db_sync&quot;</span>

/usr/bin/keystone-all
</pre></div>
</td></tr></table>

<p>In the rest of the article I will describe how to use this image to setup the
test environment. The first component you will need to use Keystone is the
database to store the credentials and other relevant information.</p>
<h3>Setup database</h3>
<p>As you saw in the <code>Dockerfile</code>, we specified a MySQL connection. To make it
easy to deploy, we will also be using a container for this database server. I
prefer to use MariaDB, as this is also what normally would come with CentOS. For
this article I will be using MariaDB version 10.1.</p>
<p>To start the container perform the following command:</p>
<div class="highlight"><pre><span></span>$ docker run -d --name keystone-database -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>secrete mariadb:10.1
</pre></div>


<p>This will pull the container and start a named instance as <code>keystone-database</code>.
The <code>root</code> password to configure the database is set using the environment
variable to <code>secrete</code>.</p>
<p>Using this password and container name, we will create a database for Keystone
and grant priviliges:</p>
<div class="highlight"><pre><span></span>$ docker <span class="nb">exec</span> keystone-database mysql -psecrete -e <span class="s2">&quot;create database keystone;&quot;</span>
$ docker <span class="nb">exec</span> keystone-database mysql -psecrete -e <span class="s2">&quot;GRANT ALL ON keystone.* TO &#39;keystone&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;;&quot;</span>
$ docker <span class="nb">exec</span> keystone-database mysql -psecrete -e <span class="s2">&quot;GRANT ALL ON keystone.* TO &#39;keystone&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;&quot;</span>
$ docker <span class="nb">exec</span> keystone-database mysql -psecrete -e <span class="s2">&quot;flush privileges;&quot;</span>
</pre></div>


<p>After this, all the setting for the database are done and we can just leave it
running without further configuration.</p>
<h3>Generate token for API usage</h3>
<p>Just like MariaDB, Keystone can use a token to perform the initial configuration.
It is preferred to make this admin token something that is random and not easily
guessable. A random token can be generated for instance with:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>openssl rand -hex 10<span class="k">)</span>
</pre></div>


<p>In the rest of the article, this token will be used.</p>
<h3>Start container</h3>
<p>After the database has been setup, and a token has been decided, we can start
the Keystone services. </p>
<div class="highlight"><pre><span></span>$ docker run -d --link keystone-database:dbhost -e <span class="nv">ADMIN_TOKEN</span><span class="o">=</span><span class="nv">$TOKEN</span> -p 5000:5000 --name keystone-server gbraad/openstack-keystone:mitaka
</pre></div>


<p>This will link the keystone container to the database container. If all goes
well, the service will now be available on the exposed ports. The container
instance will be identified by the name <code>keystone-server</code>.</p>
<p>As mentioned earlier, when the container gets started, it will provision the
database with the schemas that are needed.</p>
<p>In the following segment we will configure Keystone. </p>
<h3>Create service entry</h3>
<p>To finalize the Keystone configuration, we will insert the service and endpoints
for the Identity service.</p>
<div class="highlight"><pre><span></span>$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ service-create --name<span class="o">=</span>keystone --type<span class="o">=</span>identity --description<span class="o">=</span><span class="s2">&quot;Keystone Identity Service&quot;</span>
$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ endpoint-create --service keystone --publicurl <span class="s1">&#39;http://localhost:5000/v2.0&#39;</span> --adminurl <span class="s1">&#39;http://localhost:35357/v2.0&#39;</span> --internalurl <span class="s1">&#39;http://localhost:5000/v2.0&#39;</span>
</pre></div>


<p>Note that these command are performed inside the keystone container.</p>
<h3>Create admin user</h3>
<p>To allow access to keystone without using the admin token, we will need to
create a user. The following commands will create a user named <code>admin</code> with
the password <code>password</code> and add this to a tenant called <code>admin</code>.</p>
<div class="highlight"><pre><span></span>$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ user-create --name admin --pass password
$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ role-create --name admin
$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ tenant-create --name admin
$ docker <span class="nb">exec</span> keystone-server keystone --os-token <span class="nv">$TOKEN</span> --os-endpoint http://localhost:35357/v2.0/ user-role-add --user admin --role admin --tenant admin
</pre></div>


<p>More detailed setups are possible, and for this I will refer you to the Keystone
documentation.</p>
<h3>Getting a user token</h3>
<p>To verify Keystone works, we will retrieve a token. First you need to know the
IP address that has been assigned to your container.</p>
<div class="highlight"><pre><span></span>$ docker inspect --format<span class="o">=</span><span class="s2">&quot;{{.NetworkSettings.IPAddress}}&quot;</span> keystone-server
172.17.0.6
</pre></div>


<p>This can be helpful to communicate between different containers on the same
Docker network. You could create a new container, or pull my
<a href="https://gitlab.com/gbraad/openstack-client">OpenStack client</a> container.</p>
<h4>Using the OpenStack client</h4>
<p>Using the OpenStack client you can retrieve a token using the following
configuration:</p>
<p><code>keystonerc</code></p>
<div class="highlight"><pre><span></span>OS_IDENTITY_API_VERSION=3
OS_AUTH_URL=http://172.17.0.6:5000/v3
OS_USERNAME=admin
OS_PASSWORD=password
OS_PROJECT_NAME=admin
OS_USER_DOMAIN_NAME=Default
OS_PROJECT_DOMAIN_NAME=Default
</pre></div>


<p>When you use the following commands you will be given a token:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">source</span> keystonerc
$ openstack token issue
</pre></div>


<h4>Using cURL</h4>
<p>Since Keystone uses a HTTP interface, you can also retrieve the token using the
cURL command. When using the <code>-i</code> parameter, cURL will return all the headers
from the response. This will include the <code>X-SUBJECT-TOKEN</code> we want.</p>
<div class="highlight"><pre><span></span>$ curl -i -H <span class="s2">&quot;Content-Type: application/json&quot;</span> -d <span class="s1">&#39;</span>
<span class="s1">{ &quot;auth&quot;: {</span>
<span class="s1">    &quot;identity&quot;: {</span>
<span class="s1">      &quot;methods&quot;: [&quot;password&quot;],</span>
<span class="s1">      &quot;password&quot;: {</span>
<span class="s1">        &quot;user&quot;: {</span>
<span class="s1">          &quot;name&quot;: &quot;admin&quot;,</span>
<span class="s1">          &quot;domain&quot;: { &quot;name&quot;: &quot;Default&quot; },</span>
<span class="s1">          &quot;password&quot;: &quot;password&quot;</span>
<span class="s1">        }</span>
<span class="s1">      }</span>
<span class="s1">    },</span>
<span class="s1">    &quot;scope&quot;: {</span>
<span class="s1">      &quot;project&quot;: {</span>
<span class="s1">        &quot;name&quot;: &quot;admin&quot;,</span>
<span class="s1">        &quot;domain&quot;: { &quot;name&quot;: &quot;Default&quot; }</span>
<span class="s1">      }</span>
<span class="s1">    }</span>
<span class="s1">  }</span>
<span class="s1">}&#39;</span> http://172.17.0.6:5000/v3/auth/tokens
</pre></div>


<p>A response will follow. You need to set the value of <code>X-Subject-Token</code> to
<code>OS_TOKEN</code>, or use in cURL as the <code>X-AUTH-TOKEN</code> header. More about this can
be found in the Keystone documentation: <a href="http://docs.openstack.org/developer/keystone/api_curl_examples.html">API Examples using cURL</a>.</p>
<h3>How this was used for development</h3>
<p>For the <a href="https://github.com/projectatomic/commissaire">Commissaire project</a> I
added Keystone functionality using two methods; using
<a href="https://github.com/projectatomic/commissaire-http/issues/21">password</a> and
<a href="https://github.com/projectatomic/commissaire-http/issues/28">token</a>. The above
described container was used to allow easy deployment and testing.</p>
<p>As I decided not to introduce unnecessary libraries as dependencies, the
communication from Commissaire happens over the HTTP ReST interface. To
authenticate using a basic authorization, using the password method, we only
need to construct a simple JSON object:</p>
<div class="highlight"><pre><span></span>{ &quot;auth&quot;: {
    &quot;identity&quot;: {
      &quot;methods&quot;: [&quot;password&quot;],
      &quot;password&quot;: {
        &quot;user&quot;: {
          &quot;name&quot;: &quot;admin&quot;,
          &quot;domain&quot;: { &quot;name&quot;: &quot;Default&quot; },
          &quot;password&quot;: &quot;password&quot;
        }
      }
    },
    &quot;scope&quot;: {
      &quot;project&quot;: {
        &quot;name&quot;: &quot;admin&quot;,
        &quot;domain&quot;: { &quot;name&quot;: &quot;Default&quot; }
      }
    }
  }
}
</pre></div>


<p>In code we described this with:</p>
<div class="highlight"><pre><span></span>        headers = {&#39;Content-Type&#39;: &#39;application/json&#39;}
        body = {&#39;auth&#39;: {&#39;identity&#39;: {}}}
        ident = body[&#39;auth&#39;][&#39;identity&#39;]

        ident[&#39;methods&#39;] = [&#39;password&#39;]
        ident[&#39;password&#39;] = {&#39;user&#39;: {
            &#39;name&#39;: user,
            &#39;password&#39;: passwd,
            &#39;domain&#39;: {&#39;name&#39;: self.domain}}}
</pre></div>


<p>To perform the authentication, we send a request:</p>
<div class="highlight"><pre><span></span>        response = requests.post(
            self.url,
            data=json.dumps(body),
            headers=headers)
</pre></div>


<p>to the endpoint exposed at: <code>http://172.17.0.6:5000/v3/auth/tokens</code>. When the
response includes the header <code>X-Subject-Token</code> the authentication succeeded,
else we failed and send a 403 as status code.</p>
<div class="highlight"><pre><span></span>        if &#39;X-Subject-Token&#39; in response.headers:
            return True

        # Forbid by default
        return False
</pre></div>


<p>The Implementation for authentication using a token is quite similar, instead
we will take the <code>X-Auth-Token</code> from the request we received  and verify this
against Keystone using the following request:</p>
<div class="highlight"><pre><span></span>{
    &quot;auth&quot;: {
        &quot;identity&quot;: {
            &quot;methods&quot;: [
                &quot;token&quot;
            ],
            &quot;token&quot;: {
                &quot;id&quot;: &quot;faa166abf235430e81c9fa12ad248533&quot;
            }
        }
    }
}
</pre></div>


<p>Just like in the previous example, the endpoint is:
<code>http://172.17.0.6:5000/v3/auth/tokens</code>. If the authentication is succesful
the response will contain the <code>X-Subject-Token</code> header.</p>
<h2>Conclusion</h2>
<p>Keystone is powerful service to provide authentication for your infrastructure.
As you can see from this example, using a containerized (composed) environment,
it is easy to get a basic setup running. And using the ReST API it is also 
very simple to handle authentication outside of your own application. In future
articles more advanced scenarios will be given.</p>
<p>At the moment, password authentication using Keystone and Commissaire is
possible and hopefully soon we will also have integrated the token based
authentication.</p>
<p>If you have comments or suggestions, please leave them below or consider sending
a message to me on <a href="http://twitter.com/gbraad">Twitter</a>: @gbraad.</p>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'gbraad-blog'; // required: replace example with your forum shortname

                    var disqus_identifier = 'setup-openstack-keystone-for-testing-purposes';
                var disqus_url = 'http://gbraad.nl/blog/setup-openstack-keystone-for-testing-purposes.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">





    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 Gerard Braad <me@gbraad.nl>
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://gbraad.nl/blog/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://gbraad.nl/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://gbraad.nl/blog/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'gbraad-blog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34531495-3']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>